<table class="layui-hide" id="mainTable"></table>

<script type="text/html" id="switchTpl">
    <!-- 这里的 checked 的状态只是演示 -->
    <input type="checkbox" name="sex" value="{{d.id}}" lay-skin="switch" lay-text="女|男" lay-filter="sexDemo" {{ d.id == 10003 ? 'checked' : '' }}>
</script>

<script type="text/html" id="checkboxTpl">
    <!-- 这里的 checked 的状态只是演示 -->
    <input type="checkbox" name="lock" value="{{d.id}}" title="锁定" lay-filter="lockDemo" {{ d.id == 10006 ? 'checked' : '' }}>
</script>
<script>
    layui.use('table', function(){
        var table = layui.table
            ,form = layui.form;

        table.render({
            elem: '#mainTable'
            ,url:'/api/admin'
            ,cellMinWidth: 80
            ,parseData: function(res){ //res 即为原始返回的数据
                console.log(res)
                return {
                    "code": res.code, //解析接口状态
                    "msg": res.information, //解析提示文本
                    "count": res.total, //解析数据长度
                    "data": res.data //解析数据列表
                };
            }
            ,cols: [[
                {type:'numbers'}
                ,{field:'userName', title:'用户名', templet: '#usernameTpl'}
                ,{field:'phone', title:'联系电话'}
                ,{field:'relation', title: '关系'}
                ,{field:'isArrive', title:'是否到达', width:110, templet: '#switchTpl', unresize: true}
                ,{field:'isComment', title:'是否评论', width:110, templet: '#checkboxTpl', unresize: true}
                ,{field:'shuadanTime', title:'添加事件', width:110, templet: '#checkboxTpl', unresize: true}
            ]]
            ,page: true
        });

        //监听性别操作
        form.on('switch(sexDemo)', function(obj){
            layer.tips(this.value + ' ' + this.name + '：'+ obj.elem.checked, obj.othis);
        });

        //监听锁定操作
        form.on('checkbox(lockDemo)', function(obj){
            layer.tips(this.value + ' ' + this.name + '：'+ obj.elem.checked, obj.othis);
        });
    });
</script>